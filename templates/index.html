{%- extends "base.html" %}

{% block styles %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="{{ url_for('.static', filename='css/chat_styles.css') }}" rel="stylesheet" />
{% endblock %}

{% block body %}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
{% block scripts %}
{{super()}}
<script type="text/javascript">
    let loginName = {{ name }}
</script>
<script type="text/javascript" src="{{ url_for('static', filename='js/scripts.js') }}">
    // async function load_name() {
    //     return await fetch("/get_name")
    //         .then((response) {
    //             return await response.json();
    //         })
    //         .then((data) {
    //             return data["name"];
    //         });
    // };

    // $(document).ready(function() {

    //     var socket = io.connect("http://" + document.domain + ":" + location.port);

    //     socket.on("connect", function () {
    //         socket.emit('my event', {
    //             data: 'User Connected'
    //         });
            // var usr_name = await load_name();
            // if (usr_name != "") {
            //     socket.emit("event", {
            //         message: usr_name + " just connected to the server!",
            //         connect: true,
            //     });
            // }
            // var form = $( "#msgForm" ).on("submit", function (e) {
            //     e.preventDefault();

            //     // get input from message box
            //     let user_name = $( '#username' ).val();
            //     let user_input = $( '#message' ).val();
            //     // let user_name = await load_name();

            //     // send message to other users
            //     socket.emit("my event", {
            //         message: user_input,
            //         name: username,
            //     });

            //     // clear msg box value
            //     $( '#message' ).val() = '';
            // });
        // });

        // socket.on('my response', function(msg) {
        //     if ( typeof msg.name !== "undefined" ) {
        //         $('#messages').append($('<p>').text(msg.name + ": " + msg.message));
        //     };
        // });

        // $("#submitBtn").on('click', function(e) {
        //     e.preventDefault();

        //     let msg_input = $( '#message' ).val();

        //     $( '#message' ).val('').focus();

        //     socket.emit("my event", {
        //         name: $('#username').val(),
        //         message: msg_input
        //     });
        // });

        // socket.on("disconnect", function (msg) {
        //     var usrname = $( '#username' ).val();
        //     // var user_name = await load_name();
        //     socket.emit("my event", {
        //         message: usrname + " just left the server...",
        //     });
        // });
    // });
</script>

{% endblock %}

<nav class="navbar navbar-expand-lg bg-dark">
    <div class="container-md">
        <ul class="nav">
            <li class="nav-item">
              <a class="nav-link active" id="logo" aria-current="page" href="#">Chatty</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
            </li>
          </ul>
    </div>
</nav>


<div class="container">
    <div class="row clearfix">
        <div class="col-lg-12">
            <h3>Hello, {{ name }}</h3>
            <div class="card chat-app">
                <div class="chat">
                    <div class="chat-history">
                        <div id="messages">
                            
                        </div>


                        <form action="" method="POST" id="msgForm">
                            <input type="text" id="username" placeholder="Username" required />
                            <input type="text" id="message" placeholder="Message" required />
                            <input type="submit" id="submitBtn" value="Send" />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- <div class="container">
    <div class="row clearfix">
        <div class="col-lg-12">
            <h3>Hello, {{ name }}</h3>
            <div class="card chat-app">
                <div class="chat">
                    <div class="chat-history" id="messages">
                        <ul class="m-b-0" id="messages">
                            <li class="clearfix">
                                <div class="message-data text-right">
                                    <span class="message-data-time">10:10 AM, Today</span>
                                </div>
                                <div class="message other-message float-right"> Hi Aiden, how are you? How is the project coming along? </div>
                            </li>                             
                            <li class="clearfix">
                                <div class="message-data">
                                    <span class="message-data-time">10:15 AM, Today</span>
                                </div>
                                <div class="message my-message">Project has been already finished and I have results to show you.</div>
                            </li>
                        </ul>
                    </div>
                    <div class="chat-message clearfix">
                        <div class="input-group mb-0">
                            <form action="" method="POST" id="msgForm"></form>
                                <input id="message" type="text" class="form-control" placeholder="Enter text here...">
                                <div class="input-group-prepend">
                                    <button id="submitBtn" class="input-group-text"><i class="fa fa-send"></i></button>
                                </div>
                            </form>                                    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> -->


{% endblock %}